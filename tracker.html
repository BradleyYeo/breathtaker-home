<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="generator" content="Hugo 0.104.2">
    <title>Tracker</title>
    <link rel="stylesheet" type="text/css" href="style.css" />

    <!-- Bootstrap CSS-->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
    rel="stylesheet"
    integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
    crossorigin="anonymous">
    <!-- Vue3 -->
    <script src="https://unpkg.com/vue@next"></script>
    <!-- Axios -->
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>

    
    
  </head>
  <body>
    <header>
      <a href="index.html" class="logo">Breathtakers</a>
      <ul>
        <li class="col-lg-2 d-none d-md-block"><a href="signedinindex.html">Home</a></li>
        <li class="col-lg-3 d-none d-md-block"><a href="signedinindex.html#creators">Creators</a></li>
        <li class="col-lg-3 d-none d-md-block"><a href="#" class="active">Dashboard</a></li>
        <li class="col-lg-3 d-none d-md-block"><a href="logout.html">Log Out</a></li>
        <!-- <li><a href="#">Log In</a></li> -->
        <!-- <li><a href="https://freecode-56b4c.web.app/">Events</a></li> -->
      </ul>
    
      <div id="topNav" class="navigation d-md-none d-lg-none">
        <span id="closebtn" onclick="navToggle()">
          <span class="line1"></span>
          <span class="line2"></span>
          <span class="line3"></span>
        </span>
        <div class="logo2">
          <img src="" />
        </div>

        <ul class="menulist">
          <li class="d-md-none d-lg-none"><a href="index.html" class="active">Home</a></li>
        </ul>
        <ul class="menulist">
          <li class="d-md-none d-lg-none"><a href="index.html#creators">Creators</a></li>
        </ul>
        <ul class="menulist">
          <li class="d-md-none d-lg-none"><a href="signup.html">Sign Up</a></li>
        </ul>
        <ul class="menulist">
          <li class="d-md-none d-lg-none"><a href="login.html">Log In</a></li>
 
        </ul>
      </div>
    </header>


    <div id="app">
      <div class="container py-4 mt-5">

        <div class="row mt-5">

          <div class="col-md-8 bg-light">
            <div class="py-5 mx-5">
              <h1 class="display-5 fw-bold">Smoke-Free Streak:</h1>
              <h1 class="display-5 fw-bold">Day {{days}}</h1>
              <p class="col fs-4">Login daily to track your non-smoking days. Join the challenge to reach 365 days!</p>
              <button v-if="ready" @click="addCount" class="btn btn-primary btn-lg mx-auto" type="button">Another day</button>
              <button v-else @click="addCount" class="btn btn-primary btn-lg" type="button" disabled>Check in tomorrow</button>
              <!-- <p class="mt-3"><em>{{quote}}</em></p> -->
              <hr>
              <blockquote class="blockquote">
                <p class="pt-3 text-secondary"><em>{{quote}}</em></p>
                <footer class="blockquote-footer">{{author}} <cite title="Source Title">Source Title</cite></footer>
              </blockquote>
              
              
            </div>
          </div>

          <div class="col bg-light">
            <img :src="image" class="img-fluid p-4" alt="Responsive image">
            <div class="progress mt-1 mb-4">
              <div class="progress-bar bg-warning progress-bar-striped progress-bar-animated" 
                role="progressbar" :style="{ width: progress + '%' }">
              </div>
            </div>
          </div>
          

        </div>

      </div>
    </div>
      
    
      <script>
        Vue.createApp({
            data() {
              return {
                  days:91,
                  progress: 0,
                  clickTime: new Date('2022-11-11T00:00:00'),
                  ready:true,
                  awards: ['img/bronze.png','img/silver.png','img/gold.png'],
                  image:'',
                  quotes:[],
                  quote:'',
                  author:'',
              }
            },
            methods:{
              addCount(){
                //check how much time has elapsed since last clicked
                let now = new Date();
                let msBetweenDates = Math.abs(this.clickTime.getTime() - now.getTime());
                let hoursBetweenDates = msBetweenDates / (60 * 60 * 1000);
                  if (hoursBetweenDates >= 24){
                    this.count++;
                    this.clickTime = now;
                    this.addProgress();
                    this.ready=false;
                  }else{
                    this.ready=false;
                  }
              },

              addProgress(){
                this.days++
                this.progress = (this.days/365)*100
                this.checkImg();
                this.motivate();
              },

              checkImg(){
                if(this.progress<25){
                  this.image = this.awards[0]
                }else if(this.progress<75){
                  this.image = this.awards[1]
                }else{
                  this.image = this.awards[2]
                }
              },

              motivate(){
                //motivational quote
                axios.get("https://type.fit/api/quotes")
                .then(response =>  {
                      // console.log(response.data);
                      this.quotes = response.data;
                      // items.forEach(el => {this.posts.push(el)});
                      })
                      .catch(error => {
                          console.log(error)
                      }); 
                console.log(this.quotes);    
                // this.quote = this.quotes[0].text      
                
              }
                

            },

            created() { // created is a hook that executes as soon as Vue instance is created
                
              //check if tracker button enabled
              let now = new Date();
              let msBetweenDates = Math.abs(this.clickTime.getTime() - now.getTime());
              let hoursBetweenDates = msBetweenDates / (60 * 60 * 1000);
                if (hoursBetweenDates <24){
                  this.ready=false;
                }
            
              //check medal progress bar    
              this.progress = (this.days/365)*100;

              //medal image
              if(this.progress<25){
                this.image = this.awards[0]
              }else if(this.progress<75 && this.progress<75){
                this.image = this.awards[1]
              }else{
                this.image = this.awards[2]
              }


              // fetch("https://type.fit/api/quotes")
              // .then(function(response) {
              //   return response.json();
              // })
              // .then(function(data) {
              //   this.quotes = data;
              // });   
              
              
              fetch("http://api.quotable.io/random")
                .then((res) => res.json())
                .then((data) => {
                  this.quote = `"${data.content}"`;
                  this.author = `"${data.author}"`;
                  // author.innerHTML = `- ${data.author}`;
                });
              console.log(this.quote)
   
            },
        }).mount('#app')
      </script>


  
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
  integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
  crossorigin="anonymous"></script>


    
  </body>
</html>
